<div>
    <table>
        <?php
            $counter = 0;
            $counter2 = 0;
            $weight = 0;
            $weight2 = 0;
            
            // population color
            $color1;
            $color12;
            if ($ipopulation > 0)
            {
                if ($opopulation == "high")
                {
                    if ($rows[0]["population"] > $rows2[0]["population"])
                    {
                        $color1 = "option-a";
                        $color12 = "option-b";
                        $counter = $counter + 1;
                    }
                    else if ($rows[0]["population"] < $rows2[0]["population"])
                    {
                        $color1 = "option-b";
                        $color12 = "option-a";
                        $counter2 = $counter2 + 1;
                    }
                    else 
                    {
                        $color1 = "option-c";
                        $color12 = "option-c";
                        $counter = $counter + 0.5;
                        $counter2 = $counter2 + 0.5;
                    }
                }
                else if ($opopulation == "low")
                {
                    if ($rows[0]["population"] > $rows2[0]["population"])
                    {
                        $color1 = "option-b";
                        $color12 = "option-a";
                        $counter2 = $counter2 + 1;
                    }
                    else if ($rows[0]["population"] < $rows2[0]["population"])
                    {
                        $color1 = "option-a";
                        $color12 = "option-b";
                        $counter = $counter + 1;
                    }
                    else 
                    {
                        $color1 = "option-c";
                        $color12 = "option-c";
                        $counter = $counter + 0.5;
                        $counter2 = $counter2 + 0.5;
                    }
                }
                // population weights
                $addpopulation = 0;
                if ($rows[0]["population"] > 0 || $rows2[0]["population"] > 0)
                {
                    $addpopulation = ($rows[0]["population"] - $rows2[0]["population"])/(2 * ($rows[0]["population"] + $rows2[0]["population"])) * 100 * $ipopulation;
                }
                if ($opopulation == "high")
                {
                    if ($addpopulation > 0)
                    {
                        $weight = $weight + $addpopulation;
                    }
                    else if ($addpopulation < 0)
                    {
                        $weight2 = $weight2 - $addpopulation;
                    }
                }
                else if ($opopulation == "low")
                {
                    if ($addpopulation > 0)
                    {
                        $weight2 = $weight2 + $addpopulation;
                    }
                    else if ($addpopulation < 0)
                    {
                        $weight = $weight - $addpopulation;
                    }
                }
            }
            
            // area color
            $color2;
            $color22;
            if ($iarea > 0)
            {
                if ($oarea == "high")
                {
                    if ($rows[0]["area"] > $rows2[0]["area"])
                    {
                        $color2 = "option-a";
                        $color22 = "option-b";
                        $counter = $counter + 1;
                    }
                    else if ($rows[0]["area"] < $rows2[0]["area"])
                    {
                        $color2 = "option-b";
                        $color22 = "option-a";
                        $counter2 = $counter2 + 1;
                    }
                    else 
                    {
                        $color2 = "option-c";
                        $color22 = "option-c";
                        $counter = $counter + 0.5;
                        $counter2 = $counter2 + 0.5;
                    }
                }
                else if ($oarea == "low")
                {
                    if ($rows[0]["area"] > $rows2[0]["area"])
                    {
                        $color2 = "option-b";
                        $color22 = "option-a";
                        $counter2 = $counter2 + 1;
                    }
                    else if ($rows[0]["area"] < $rows2[0]["area"])
                    {
                        $color2 = "option-a";
                        $color22 = "option-b";
                        $counter = $counter + 1;
                    }
                    else 
                    {
                        $color2 = "option-c";
                        $color22 = "option-c";
                        $counter = $counter + 0.5;
                        $counter2 = $counter2 + 0.5;
                    }
                }
                
                // area weights
                $addarea = 0;
                if ($rows[0]["area"] > 0 || $rows2[0]["area"] > 0)
                {
                    $addarea = ($rows[0]["area"] - $rows2[0]["area"])/(2 * ($rows[0]["area"] + $rows2[0]["area"])) * 100 * $iarea;
                }
                if ($oarea == "high")
                {
                    if ($addarea > 0)
                    {
                        $weight = $weight + $addarea;
                    }
                    else if ($addarea < 0)
                    {
                        $weight2 = $weight2 - $addarea;
                    }
                }
                else if ($oarea == "low")
                {
                    if ($addarea > 0)
                    {
                        $weight2 = $weight2 + $addarea;
                    }
                    else if ($addarea < 0)
                    {
                        $weight = $weight - $addarea;
                    }
                }
            }
            
            // temp color
            $color3;
            $color32;
            if ($itemp > 0)
            {
                if ($otemp == "high")
                {
                    if ($rows[0]["temp"] > $rows2[0]["temp"])
                    {
                        $color3 = "option-a";
                        $color32 = "option-b";
                        $counter = $counter + 1;
                    }
                    else if ($rows[0]["temp"] < $rows2[0]["temp"])
                    {
                        $color3 = "option-b";
                        $color32 = "option-a";
                        $counter2 = $counter2 + 1;
                    }
                    else 
                    {
                        $color3 = "option-c";
                        $color32 = "option-c";
                        $counter = $counter + 0.5;
                        $counter2 = $counter2 + 0.5;
                    }
                }
                else if ($otemp == "low")
                {
                    if ($rows[0]["temp"] > $rows2[0]["temp"])
                    {
                        $color3 = "option-b";
                        $color32 = "option-a";
                        $counter2 = $counter2 + 1;
                    }
                    else if ($rows[0]["temp"] < $rows2[0]["temp"])
                    {
                        $color3 = "option-a";
                        $color32 = "option-b";
                        $counter = $counter + 1;
                    }
                    else 
                    {
                        $color3 = "option-c";
                        $color32 = "option-c";
                        $counter = $counter + 0.5;
                        $counter2 = $counter2 + 0.5;
                    }
                }
                
                // temp weights
                $addtemp = 0;
                if ($rows[0]["temp"] > 0 || $rows2[0]["temp"] > 0)
                {
                    $addtemp = ($rows[0]["temp"] - $rows2[0]["temp"])/(2 * ($rows[0]["temp"] + $rows2[0]["temp"])) * 100 * $itemp;
                }
                if ($otemp == "high")
                {
                    if ($addtemp > 0)
                    {
                        $weight = $weight + $addtemp;
                    }
                    else if ($addtemp < 0)
                    {
                        $weight2 = $weight2 - $addtemp;
                    }
                }
                else if ($otemp == "low")
                {
                    if ($addtemp > 0)
                    {
                        $weight2 = $weight2 + $addtemp;
                    }
                    else if ($addtemp < 0)
                    {
                        $weight = $weight - $addtemp;
                    }
                }
            }
            
            // income color
            $color4;
            $color42;
            if ($iincome > 0)
            {
                if ($oincome == "high")
                {
                    if ($rows[0]["income"] > $rows2[0]["income"])
                    {
                        $color4 = "option-a";
                        $color42 = "option-b";
                        $counter = $counter + 1;
                    }
                    else if ($rows[0]["income"] < $rows2[0]["income"])
                    {
                        $color4 = "option-b";
                        $color42 = "option-a";
                        $counter2 = $counter2 + 1;
                    }
                    else 
                    {
                        $color4 = "option-c";
                        $color42 = "option-c";
                        $counter = $counter + 0.5;
                        $counter2 = $counter2 + 0.5;
                    }
                }
                else if ($oincome == "low")
                {
                    if ($rows[0]["income"] > $rows2[0]["income"])
                    {
                        $color4 = "option-b";
                        $color42 = "option-a";
                        $counter2 = $counter2 + 1;
                    }
                    else if ($rows[0]["income"] < $rows2[0]["income"])
                    {
                        $color4 = "option-a";
                        $color42 = "option-b";
                        $counter = $counter + 1;
                    }
                    else 
                    {
                        $color4 = "option-c";
                        $color42 = "option-c";
                        $counter = $counter + 0.5;
                        $counter2 = $counter2 + 0.5;
                    }
                }
                
                // income weights
                $addincome = 0;
                if ($rows[0]["income"] > 0 || $rows2[0]["income"] > 0)
                {
                    $addincome = ($rows[0]["income"] - $rows2[0]["income"])/(2 * ($rows[0]["income"] + $rows2[0]["income"])) * 100 * $iincome;
                }
                if ($oincome == "high")
                {
                    if ($addincome > 0)
                    {
                        $weight = $weight + $addincome;
                    }
                    else if ($addincome < 0)
                    {
                        $weight2 = $weight2 - $addincome;
                    }
                }
                else if ($oincome == "low")
                {
                    if ($addincome > 0)
                    {
                        $weight2 = $weight2 + $addincome;
                    }
                    else if ($addincome < 0)
                    {
                        $weight = $weight - $addincome;
                    }
                }
            }
            
            // score colors
            $colorx;
            $colorx2;
            if ($counter > $counter2)
            {
                $colorx = "option-ax";
                $colorx2 = "option-bx";
            }
            else if ($counter < $counter2)
            {
                $colorx = "option-bx";
                $colorx2 = "option-ax";
            }
            else
            {
                $colorx = "option-cx";
                $colorx2 = "option-cx";
            }
            
            // converts weights to percentages
            if ($weight == 0 && $weight2 == 0)
            {
                $weight = 50;
                $weight2 = 50;
            }
            else
            {
            $weightcopy = $weight;
            $weight = 100 * ($weight / ($weight + $weight2));
            $weight2 = 100 * ($weight2 / ($weightcopy + $weight2));
            }
            
            // weight colors
            $colory;
            $colory2;
            if ($weight > $weight2)
            {
                $colory = "option-ax";
                $colory2 = "option-bx";
            }
            else if ($weight < $weight2)
            {
                $colory = "option-bx";
                $colory2 = "option-ax";
            }
            else
            {
                $colory = "option-cx";
                $colory2 = "option-cx";
            }
        ?>
        
        <!-- end of colors -->
        
        <tr>
            <td class=topcontentbox> State </td>
            <?php
            print("<td class=topcontentbox>" . $rows[0]["name"] . "</td>");
            print("<td class=topcontentbox>" . $rows2[0]["name"] . "</td>");          
            ?>
        </tr>
        
        <?php
        if ($ipopulation > 0)
        {
            print("<tr>");
            print("<td class=topcontentbox>" . "Population" . "</td>");
            print("<td class=$color1>" . $rows[0]['population'] . '</td>');
            print("<td class=$color12>" . $rows2[0]['population'] . '</td>');
            print("</tr>");
        }
        
        if ($iarea > 0)
        {
            print("<tr>");
            print("<td class=topcontentbox>" . "Area" . "</td>");
            print("<td class=$color2>" . $rows[0]['area'] . '</td>');
            print("<td class=$color22>" . $rows2[0]['area'] . '</td>');
            print("</tr>");
        }
        
        if ($itemp > 0)
        {
            print("<tr>");
            print("<td class=topcontentbox>" . "Temperature" . "</td>");
            print("<td class=$color3>" . $rows[0]['temp'] . '</td>');
            print("<td class=$color32>" . $rows2[0]['temp'] . '</td>');
            print("</tr>");
        }
        
        if ($iincome > 0)
        {
            print("<tr>");
            print("<td class=topcontentbox>" . "Income" . "</td>");
            print("<td class=$color4>" . $rows[0]['income'] . '</td>');
            print("<td class=$color42>" . $rows2[0]['income'] . '</td>');
            print("</tr>");
        }
        ?>
        
        <tr>
            <td class=topcontentbox> Raw Score </td>
            <?php
            print("<td class=$colorx>" . $counter . "</td>");
            print("<td class=$colorx2>" . $counter2 . "</td>");          
            ?>
        </tr>
        
        <tr>
            <td class=topcontentbox> Weighted Score </td>
            <?php
                if ($weight > 0 && $weight < 0.01)
                {
                    $weight = 0.01;
                }
                else if ($weight > 49.99 && $weight < 50.00)
                {
                    $weight = 49.99;
                }
                else if ($weight > 50.00 && $weight < 50.01)
                {
                    $weight = 50.01;
                }
                else if ($weight > 99.99 &&  $weight < 100.00)
                {
                    $weight = 99.99;
                }
                
                if ($weight2 > 0 && $weight2 < 0.01)
                {
                    $weight2 = 0.01;
                }
                else if ($weight2 > 49.99 && $weight2 < 50.00)
                {
                    $weight2 = 49.99;
                }
                else if ($weight2 > 50.00 && $weight2 < 50.01)
                {
                    $weight2 = 50.01;
                }
                else if ($weight2 > 99.99 &&  $weight2 < 100.00)
                {
                    $weight2 = 99.99;
                }
            
                print("<td class=$colory>" . number_format((float)$weight, 2, '.', '') . "%" . "</td>");
                print("<td class=$colory2>" . number_format((float)$weight2, 2, '.', '') . "%" . "</td");
            ?>
        <tr>    
    </table>
    </div>
    <?php
        if ($counter == 0 && $counter2 == 0)
        {
            print("<p>Bro. You should compare something next time!!!</p>");
        }
    ?>
</div>
